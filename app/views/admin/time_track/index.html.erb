<h1>Time Tracks</h1>

<table class="table table-striped table-bordered">
  <thead class="thead-dark">
  <tr>
    <th>#</th>
    <th>Room ID</th>
    <th>Professor Name</th>
    <th>Date</th>
    <th>Check-in Time</th>
    <th>Check-out Time</th>
    <th>Status</th>
    <th>Actions</th>
  </tr>
  </thead>
  <tbody>
  <% row_index = 1 %>
  <% @time_tracks.each do |track| %>
    <tr>
      <td><%= row_index %></td>
      <td><%= track.room.room_number || "No Room Assigned" %></td>
      <td><%= "#{track.user.firstname} #{track.user.middlename} #{track.user.lastname}" %></td>
      <td><%= track.created_at.strftime("%B %d, %Y") %></td>
      <td>
        <%= track.time_in.present? ? (Time.parse(track.time_in).strftime("%I:%M %p") rescue track.time_in) : "N/A" %>
      </td>
      <td>
        <%= track.time_out.present? ? (Time.parse(track.time_out).strftime("%I:%M %p") rescue track.time_out) : "N/A" %>
      </td>
      <td><%= track.status %></td>
      <td>
        <div class="d-inline-flex gap-2">
          <%= link_to edit_time_track_path(track),
                      class: "btn btn-sm btn-warning d-flex align-items-center",
                      title: "Edit" do %>
            <i class="bi bi-pencil"></i>
          <% end %>

          <%= button_to time_track_path(track),
                        method: :delete,
                        class: "btn btn-sm btn-danger d-flex align-items-center",
                        data: { turbo_confirm: 'Are you sure you want to delete this time record?', turbo_method: 'delete' } do %>
            <i class="bi bi-trash"></i>
          <% end %>
        </div>
      </td>
    </tr>
    <% row_index += 1 %>
  <% end %>
  </tbody>
</table>
